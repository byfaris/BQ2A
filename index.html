<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAMG ARENA | التطوير المركز</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Cairo:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --pink: #ff00ff; --bg: #050508; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            background: var(--bg); color: white; font-family: 'Cairo', sans-serif;
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
            background-image: radial-gradient(circle, #1a1a2e 0%, #000 100%);
        }

        /* HUD - واجهة البيانات */
        .hud {
            width: 100%; padding: 20px; display: flex; justify-content: space-around;
            z-index: 100; font-family: 'Orbitron';
        }
        .stat-box {
            background: rgba(0,0,0,0.5); border: 1px solid var(--neon);
            padding: 10px 20px; border-radius: 12px; min-width: 120px; text-align: center;
        }

        /* حلبة اللعب */
        .arena { flex-grow: 1; position: relative; perspective: 1000px; width: 100%; }

        .card {
            width: 140px; height: 190px; background: #111;
            border: 2px solid var(--neon); border-radius: 12px;
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotateY(0deg);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }
        .card.flipped { transform: translate(-50%, -50%) rotateY(180deg); border-color: var(--pink); }

        /* اليد */
        .hand {
            position: absolute; width: 200px; bottom: -250px; left: 50%;
            transform: translateX(-50%); z-index: 200; pointer-events: none;
        }
        .hand.strike { animation: strike-move 0.4s ease-out; }

        @keyframes strike-move {
            0% { bottom: -250px; }
            50% { bottom: 35%; transform: translateX(-50%) scale(1.2); }
            100% { bottom: -250px; }
        }

        .shake { animation: table-shake 0.2s; }
        @keyframes table-shake {
            0%, 100% { transform: translate(0,0); }
            25% { transform: translate(5px, 5px); }
            75% { transform: translate(-5px, -5px); }
        }

        /* لغات العالم - زر التبديل */
        .lang-switch { position: fixed; bottom: 20px; right: 20px; background: none; border: 1px solid var(--neon); color: var(--neon); padding: 5px 15px; cursor: pointer; border-radius: 5px; font-size: 12px; }
    </style>
</head>
<body onclick="app.executeStrike()">

    <div class="hud">
        <div class="stat-box"><div id="lbl-round">ROUND</div><div id="val-round">1/3</div></div>
        <div class="stat-box"><div id="lbl-score">FLIPS</div><div id="val-score">0</div></div>
    </div>

    <div class="arena" id="arena-main">
        <div class="card" id="game-card">MAMG</div>
        <img src="https://i.imgur.com/GisLhP6.png" id="game-hand" class="hand" alt="hand">
    </div>

    <button class="lang-switch" onclick="app.toggleLang(event)">EN / AR</button>

    <script>
        // نظام التطوير الموحد (Object-Oriented) لمنع تداخل الأكواد
        const app = {
            score: 0,
            round: 1,
            isLocked: false,
            lang: 'ar',
            text: {
                ar: { round: "الجولة", flips: "القلبات" },
                en: { round: "ROUND", flips: "FLIPS" }
            },

            executeStrike: function() {
                if (this.isLocked) return;
                this.isLocked = true;

                const hand = document.getElementById('game-hand');
                const card = document.getElementById('game-card');
                const arena = document.getElementById('arena-main');

                hand.classList.add('strike');

                setTimeout(() => {
                    arena.classList.add('shake');
                    // منطق الفيزياء: فرصة 50% للقلب عند كل اصطدام
                    if (Math.random() > 0.5) {
                        card.classList.toggle('flipped');
                        if (card.classList.contains('flipped')) {
                            this.score++;
                            document.getElementById('val-score').innerText = this.score;
                        }
                    }
                    setTimeout(() => arena.classList.remove('shake'), 200);
                }, 200);

                setTimeout(() => {
                    hand.classList.remove('strike');
                    this.isLocked = false;
                }, 400);
            },

            toggleLang: function(e) {
                e.stopPropagation(); // منع الضربة عند تغيير اللغة
                this.lang = (this.lang === 'ar') ? 'en' : 'ar';
                document.getElementById('lbl-round').innerText = this.text[this.lang].round;
                document.getElementById('lbl-score').innerText = this.text[this.lang].flips;
                document.documentElement.dir = (this.lang === 'ar') ? 'rtl' : 'ltr';
            }
        };

        // التحقق من سلامة البنية عند البدء
        window.onload = () => {
            console.log("MAMG ARENA System: Online & Validated.");
        };
    </script>
</body>
</html>
