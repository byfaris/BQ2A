<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BQ2A | NEXT-GEN MODEL</title>
    <style>
        body { margin: 0; background-color: #000; overflow: hidden; }
        canvas { width: 100%; height: 100%; display: block; }
        .hud-top {
            position: absolute; top: 20px; left: 20px;
            color: #00f2ff; font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px #00f2ff; pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="hud-top">
        <h1 style="margin:0; font-size: 1.2rem;">BQ2A ENGINE</h1>
        <p style="font-size: 0.6rem; letter-spacing: 2px;">LOADING 3D ASSETS...</p>
    </div>

    <canvas id="application-canvas"></canvas>

    <script src="https://code.playcanvas.com/playcanvas-stable.min.js"></script>

    <script>
        const canvas = document.getElementById('application-canvas');
        const app = new pc.Application(canvas, {
            mouse: new pc.Mouse(canvas),
            touch: new pc.TouchDevice(canvas)
        });

        app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
        app.setCanvasResolution(pc.RESOLUTION_AUTO);
        app.start();

        // إعداد الإضاءة والبيئة
        app.scene.gammaCorrection = pc.GAMMA_SRGB;
        app.scene.toneMapping = pc.TONEMAP_ACES;

        const camera = new pc.Entity('camera');
        camera.addComponent('camera', { clearColor: new pc.Color(0.01, 0.01, 0.01) });
        app.root.addChild(camera);
        camera.setPosition(0, 0, 3);

        const light = new pc.Entity('light');
        light.addComponent('light', { type: 'directional', color: new pc.Color(1, 1, 1), intensity: 2 });
        light.setEulerAngles(45, 45, 0);
        app.root.addChild(light);

        // تحميل نموذج 3D حقيقي (مثال لخوذة Sci-Fi بتفاصيل عالية)
        const url = 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF-Binary/DamagedHelmet.glb';
        
        app.assets.loadFromUrl(url, "container", function (err, asset) {
            const entity = asset.resource.instantiateRenderEntity();
            entity.setLocalScale(1, 1, 1);
            app.root.addChild(entity);

            // التحكم باللمس لتدوير النموذج
            if (app.touch) {
                app.touch.on(pc.EVENT_TOUCHMOVE, (e) => {
                    entity.rotate(e.touches[0].dy * 0.5, e.touches[0].dx * 0.5, 0);
                });
            }

            // دوران تلقائي خفيف
            app.on('update', (dt) => {
                entity.rotate(0, 10 * dt, 0);
            });
        });

        window.addEventListener('resize', () => app.resizeCanvas());
    </script>
</body>
</html>
